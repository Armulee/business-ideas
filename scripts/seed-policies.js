const mongoose = require('mongoose')

// Define the schema inline
const PolicySectionSchema = new mongoose.Schema({
    title: {
        type: String,
        required: true,
        trim: true,
    },
    content: {
        type: String,
        required: true,
    },
    list: [{
        type: String,
        trim: true,
    }],
})

const PolicySchema = new mongoose.Schema({
    type: {
        type: String,
        enum: ["privacy-policy", "terms-conditions"],
        required: true,
        unique: true,
    },
    title: {
        type: String,
        required: true,
        trim: true,
    },
    description: {
        type: String,
        required: true,
        trim: true,
    },
    lastUpdated: {
        type: Date,
        default: Date.now,
    },
    sections: [PolicySectionSchema],
    isActive: {
        type: Boolean,
        default: true,
    },
}, {
    timestamps: true,
})

const Policy = mongoose.model('Policy', PolicySchema)

// Default Privacy Policy data
const privacyPolicyData = {
    type: "privacy-policy",
    title: "Privacy Policy | BlueBizHub",
    description: "BlueBizHub is committed to protecting your privacy. This Privacy Policy explains how your personal information is collected, used, and disclosed by BlueBizHub.",
    sections: [
        {
            title: "Introduction",
            content: 'BlueBizHub ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how your personal information is collected, used, and disclosed by BlueBizHub. This Privacy Policy applies to our website, and its associated subdomains (collectively, our "Service") alongside our application, BlueBizHub. By accessing or using our Service, you signify that you have read, understood, and agree to our collection, storage, use, and disclosure of your personal information as described in this Privacy Policy and our Terms of Service.',
        },
        {
            title: "Definitions and Key Terms",
            content: "To help explain things as clearly as possible in this Privacy Policy, every time any of these terms are referenced, they are strictly defined as follows:",
            list: [
                "Cookie: small amount of data generated by a website and saved by your web browser. It is used to identify your browser, provide analytics, remember information about you such as your language preference or login information.",
                'Company: when this policy mentions "Company," "we," "us," or "our," it refers to BlueBizHub, that is responsible for your information under this Privacy Policy.',
                "Country: where BlueBizHub or the owners/founders of BlueBizHub are based, in this case is Thailand",
                "Customer: refers to the company, organization or person that signs up to use the BlueBizHub Service to manage the relationships with your consumers or service users.",
                "Device: any internet connected device such as a phone, tablet, computer or any other device that can be used to visit BlueBizHub and use the services.",
                "IP address: Every device connected to the Internet is assigned a number known as an Internet protocol (IP) address. These numbers are usually assigned in geographic blocks. An IP address can often be used to identify the location from which a device is connecting to the Internet.",
                "Personnel: refers to those individuals who are employed by BlueBizHub or are under contract to perform a service on behalf of one of the parties.",
                "Personal Data: any information that directly, indirectly, or in connection with other information — including a personal identification number — allows for the identification or identifiability of a natural person.",
                "Service: refers to the service provided by BlueBizHub as described in the relative terms (if available) and on this platform.",
                "Third-party service: refers to advertisers, contest sponsors, promotional and marketing partners, and others who provide our content or whose products or services we think may interest you.",
                "Website: BlueBizHub's site, which can be accessed via this URL: https://bluebizhub.com",
                "You: a person or entity that is registered with BlueBizHub to use the Services."
            ]
        },
        {
            title: "What Information Do We Collect?",
            content: "We collect information from you when you visit our website, register on our site, place an order, subscribe to our newsletter, respond to a survey or fill out a form.",
            list: ["Name / Username", "Email Addresses", "Mailing Addresses", "Billing Addresses", "Debit/credit card numbers", "Password"]
        },
        {
            title: "How Do We Use The Information We Collect?",
            content: "Any of the information we collect from you may be used in one of the following ways:",
            list: [
                "To personalize your experience (your information helps us to better respond to your individual needs)",
                "To improve our website (we continually strive to improve our website offerings based on the information and feedback we receive from you)",
                "To improve customer service (your information helps us to more effectively respond to your customer service requests and support needs)",
                "To process transactions",
                "To administer a contest, promotion, survey or other site feature",
                "To send periodic emails"
            ]
        },
        {
            title: "Contact Us",
            content: "Don't hesitate to contact us if you have any questions about this Privacy Policy."
        }
    ]
}

// Default Terms & Conditions data
const termsConditionsData = {
    type: "terms-conditions",
    title: "Terms & Conditions | BlueBizHub",
    description: "Terms and conditions governing use of the BlueBizHub platform.",
    sections: [
        {
            title: "General Terms",
            content: "By accessing and placing an order with BlueBizHub, you confirm that you are in agreement with and bound by the terms of service contained in the Terms & Conditions outlined below. These terms apply to the entire website and any email or other type of communication between you and BlueBizHub."
        },
        {
            title: "License",
            content: "BlueBizHub grants you a revocable, non-exclusive, non-transferable, limited license to download, install and use the website strictly in accordance with the terms of this Agreement."
        },
        {
            title: "Definitions and key terms",
            content: "To help explain things as clearly as possible in this Terms & Conditions, every time any of these terms are referenced, are strictly defined as:",
            list: [
                "Cookie: small amount of data generated by a website and saved by your web browser. It is used to identify your browser, provide analytics, remember information about you such as your language preference or login information.",
                'Company: when this policy mentions "Company," "we," "us," or "our," it refers to BlueBizHub, that is responsible for your information under this Terms & Conditions.',
                "Country: where BlueBizHub or the owners/founders of BlueBizHub are based, in this case is Thailand",
                "Device: any internet connected device such as a phone, tablet, computer or any other device that can be used to visit BlueBizHub and use the services.",
                "Service: refers to the service provided by BlueBizHub as described in the relative terms (if available) and on this platform.",
                "Third-party service: refers to advertisers, contest sponsors, promotional and marketing partners, and others who provide our content or whose products or services we think may interest you.",
                "Website: BlueBizHub's site, which can be accessed via this URL: https://bluebizhub.com",
                "You: a person or entity that is registered with BlueBizHub to use the Services."
            ]
        },
        {
            title: "Contact Us",
            content: "Don't hesitate to contact us if you have any questions.",
            list: [
                "Via Email: support@bluebizhub.com",
                "Via this Link: https://bluebizhub.com/contact-us"
            ]
        }
    ]
}

async function seedPolicies() {
    try {
        // Connect to MongoDB
        const mongoUri = process.env.MONGODB_URI || 'mongodb://localhost:27017/bluebizhub'
        await mongoose.connect(mongoUri)
        console.log('Connected to MongoDB')

        // Clear existing policies
        await Policy.deleteMany({})
        console.log('Cleared existing policies')

        // Insert default policies
        await Policy.create(privacyPolicyData)
        console.log('Created Privacy Policy')

        await Policy.create(termsConditionsData)
        console.log('Created Terms & Conditions')

        console.log('✅ Policies seeded successfully!')
        
    } catch (error) {
        console.error('❌ Error seeding policies:', error)
    } finally {
        await mongoose.connection.close()
        console.log('Database connection closed')
    }
}

seedPolicies()